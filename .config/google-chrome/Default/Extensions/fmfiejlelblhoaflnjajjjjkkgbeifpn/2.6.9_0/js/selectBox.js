var selectBox={arrowHeight:24,optionsOver:function(a,b){var c=a.options;b=(a=c.querySelector(".over"))?b?a.nextElementSibling:a.previousElementSibling:b?c.firstChild:c.lastChild;null!==b&&(a&&a.classList.remove("over"),b.classList.add("over"))},hideOptions:function(a){a.isOpen=!1;a.options.style.display="none";a.control.classList.remove("is-open")},openOptions:function(a){for(var b=a.control,c=a.options,e=0,d=b;d&&(e+=d.offsetLeft||0,d=d.parentNode,d!==document););d=document.body.clientHeight;c.style.display=
"block";b=b.clientTop+b.clientHeight;c.style.top=b+"px";c.style.height="initial";b+c.clientHeight>d&&(c.style.height=d-b-1-1+"px");c.style.left=e+"px";a.isOpen=!0;a.control.classList.add("is-open");(e=c.querySelector(".over"))&&e.classList.remove("over");c.childNodes[a.selectedIndex].classList.add("over");document.body.addEventListener("click",function g(b){document.body.removeEventListener("click",g);selectBox.hideOptions(a)})},select:function(a,b){var c=a.control,e=a.options;if(void 0===b){if(!a.isOpen)return;
b=a.options.querySelector(".over");if(null===b)return;b=Array.prototype.indexOf.call(a.options.childNodes,b);if(-1===b)return}null!==c.lastChild&&"DIV"===c.lastChild.tagName&&c.removeChild(c.lastChild);c.appendChild(e.childNodes[b].cloneNode(!0));a.selectedIndex!==b&&(a.selectedIndex=b,a.select.selectedIndex=b,a.select.dispatchEvent(new CustomEvent("change")));a.isOpen&&selectBox.hideOptions(a)},update:function(a){var b="none";void 0!==a.options&&(b=a.options.style.display||b,a.options.parentNode.removeChild(a.options));
a.options=utils.create("div",{class:"simple-select-box-menu",style:{display:b,position:"absolute",width:a.control.clientWidth+"px"},on:["click",function(a){a.stopPropagation()}],append:function(){for(var b=[],e=a.select.childNodes,d=0,f;f=e[d];d++)"OPTION"===f.tagName&&b.push(utils.create("div",{class:"item",data:{value:f.value,index:d},append:[f.dataset.image?utils.create("span",{class:"image"}):void 0,utils.create("span",{text:f.textContent,title:f.textContent})],on:["click",function(){selectBox.select(a,
this.dataset.index)}],onCreate:function(a){for(var b in f.dataset)a.dataset[b]=f.dataset[b]}}));return b}()});document.body.appendChild(a.options);selectBox.select(a,a.select.selectedIndex)},wrap:function(a){var b={select:a,isOpen:!1};b.selectedIndex=a.selectedIndex;var c={select:selectBox.select.bind(selectBox,b),update:selectBox.update.bind(selectBox,b),openOptions:selectBox.openOptions.bind(selectBox,b),optionsOver:selectBox.optionsOver.bind(selectBox,b),hideOptions:selectBox.hideOptions.bind(selectBox,
b)};b.control=utils.create("a",{href:"#",class:"simple-select-box",style:{width:a.clientWidth+selectBox.arrowHeight+"px",display:"inline-block"},append:[utils.create("span",{class:"arrow",append:utils.create("span")})],on:[["click",function(a){a.stopPropagation();a.preventDefault();if(b.isOpen)return c.select();c.openOptions()}],["keydown",function(a){if(40===a.keyCode){if(!b.isOpen)return c.openOptions();c.optionsOver(1)}else if(38===a.keyCode){if(!b.isOpen)return c.openOptions();c.optionsOver()}else 27===
a.keyCode&&b.isOpen&&(a.preventDefault(),c.hideOptions())}]]});a.style.display="none";a.parentNode.appendChild(b.control);c.update();return c}};
